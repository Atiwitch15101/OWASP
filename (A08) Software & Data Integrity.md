# Software & Data Integrity

Software and Data Integrity Failures คือปัญหาที่เกิดขึ้นเมื่อซอฟต์แวร์หรือข้อมูลในระบบไม่ถูกต้องหรือถูกแก้ไขโดยไม่ได้รับอนุญาต ทำให้ระบบของเราอาจถูกโจมตีได้ง่าย ตัวอย่างง่าย ๆ ก็คือ การที่มีใครบางคนแอบแก้ไขไฟล์สำคัญของเราโดยที่เราไม่รู้ ทำให้ซอฟต์แวร์ของเราไม่ทำงานตามที่ควรจะเป็น หรือข้อมูลที่สำคัญถูกเปลี่ยนแปลงไป ซึ่งอาจทำให้เกิดความเสียหายได้

## Insecure Deserialization

Insecure Deserialization เป็นช่องโหว่ที่เกิดขึ้นเมื่อแอปพลิเคชันรับข้อมูลที่ถูก serialize มาจากผู้ใช้ (เช่น JSON, XML, หรือไฟล์อื่น ๆ) แล้วทำการ deserialize โดยไม่ได้ตรวจสอบความถูกต้องและความปลอดภัยของข้อมูลนั้น ผู้โจมตีสามารถแทรกโค้ดที่เป็นอันตรายหรือข้อมูลที่ไม่เหมาะสมเข้ามา ทำให้สามารถควบคุมแอปพลิเคชันหรือเข้าถึงข้อมูลที่ไม่ควรเข้าถึงได้

  - **ตัวอย่าง**
  
    > ใน WebGoat คุณอาจเห็นตัวอย่างที่แสดงให้เห็นว่าเมื่อระบบทำการ deserialize ข้อมูลที่ไม่ปลอดภัย ผู้โจมตีสามารถส่ง payload ที่เป็นอันตราย เช่น การสร้างออบเจ็กต์ที่เป็นโค้ดที่เป็นอันตรายเข้าไปในระบบ ทำให้ระบบรันโค้ดนั้นโดยไม่ได้ตั้งใจ
  
    
  - **ป้องกันอย่างไร**

    > - **Validate and Sanitize Input** ตรวจสอบและทำความสะอาดข้อมูลที่เข้ามาก่อนที่จะทำการ deserialize
    > - **Use Whitelisting** ใช้รายการที่อนุญาตเฉพาะคลาสหรือออบเจ็กต์ที่ปลอดภัยและคาดว่าจะได้รับเท่านั้น
    > - **Implement Integrity Checks** ใช้การตรวจสอบความสมบูรณ์ของข้อมูล เช่น การใช้ HMAC หรือการเซ็นข้อมูลเพื่อให้แน่ใจว่าข้อมูลไม่ได้ถูกแก้ไข
    > - **Avoid Native Deserialization** หลีกเลี่ยงการใช้การ deserialize โดยตรงจากภายนอก โดยใช้วิธีการ serialize และ deserialize ที่ปลอดภัยและควบคุมได้
    > - **Monitor and Log Deserialization Activity** ติดตามและบันทึกกิจกรรมการ deserialize เพื่อตรวจสอบความผิดปกติและตอบสนองได้ทันท่วงที
    
___
